# å°ç¨‹åºï¼šå¿«å¿«æˆ´å£ç½©

> ğŸ˜· ççˆ±ç”Ÿå‘½ï¼Œä»æˆ‘åšèµ·

é‡‡ç”¨å¾®ä¿¡å°ç¨‹åºç¼–å†™ï¼Œå®ç°äº†è‡ªåŠ¨ä¸ºå¤´åƒæˆ´ä¸Šå£ç½©çš„åŠŸèƒ½ã€‚

æºç åœ°å€ï¼šhttps://github.com/hi-our/hi-face

**ä¸»è¦åŠŸèƒ½**

* æ™ºèƒ½è¯†åˆ«äººè„¸ï¼Œè¿›è¡Œäº”å®˜å®šä½
* æ”¯æŒå¤šäººè¯†åˆ«
* æ”¯æŒæ·»åŠ åŠ æ²¹å›¾ç‰‡


**æ‰«ç é¢„è§ˆ**

å¾®ä¿¡æœä¸€æœï¼šå¿«å¿«æˆ´å£ç½©

![](https://n1image.hjfile.cn/res7/2020/02/02/e40fff62cb635dd9be797226f7c266ed.png)

## å°ç¨‹åºæˆªå›¾
![](https://uploader.shimo.im/f/iCCrtwBFo6EK5uEs.JPG!thumbnail)

## ç¨‹åºè¯´æ˜
### é¡¹ç›®ä¸»è¦æ–‡ä»¶
* taro/ å°ç¨‹åºç‰ˆï¼ŒåŸºäºtarojs
  * src/
    * image/ åœ¨æ­¤æ”¾ç½®æ‰€æœ‰å£ç½©çš„ç´ æ
    * pages/
      * wear-a-mask å£ç½©åŠŸèƒ½é¡µé¢
      * thanks è‡´è°¢é¡µé¢
      * spread-game ç—…æ¯’æ¨¡æ‹Ÿæ¼”åŒ–å™¨
* cloud/functions/analyze-face è…¾è®¯äº‘äººè„¸è¯†åˆ«æ•ˆæœ
* client/ reactç‰ˆæœ¬ï¼ŒåŸºäºface-api.js


### æ ¸å¿ƒç®—æ³•ä»‹ç»
* æ ¸å¿ƒç®—æ³•ï¼šæ€ä¹ˆè¯†åˆ«äººè„¸äº”å®˜ä¿¡æ¯
  * ç½‘é¡µä¸­ï¼šå¯ä»¥è°ƒç”¨ face-api.js æ¥è·å–
  * å°ç¨‹åºï¼šä¸ç½‘é¡µä¸­canvasä¸ä¸€è‡´ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨ face-api.jsï¼Œå¯ä»¥å°†å…¶æ”¾åœ¨nodejsä¸­è°ƒç”¨ï¼Œæˆ–è€…ä½¿ç”¨è…¾è®¯äº‘çš„äººè„¸äº”å®˜åˆ†æï¼Œæ¯æœˆå…è´¹é¢åº¦10000æ¬¡
* å¦‚ä½•è£å‰ªå›¾ç‰‡
  * å¾®ä¿¡å¤´åƒï¼šæ­£æ–¹å½¢å°å›¾ï¼Œæ— éœ€è£å‰ª
  * æ‹ç…§æˆ–å›¾åº“é€‰æ‹©ï¼šä½¿ç”¨`taro-cropper`
* æ ¸å¿ƒç®—æ³•ï¼šæ€ä¹ˆå®ç°å£ç½©çš„å®æ—¶è½¬åŠ¨
  * å½“ touchstart æ—¶ï¼Œä¿å­˜æ­¤æ—¶çš„ touch èµ·å§‹ç‚¹ï¼Œå¹¶ä»¥æ­¤æ—¶çš„åº•å›¾å’Œå£ç½©ä½ç½®ä½œä¸ºæ—‹è½¬è§’åº¦å’Œç¼©æ”¾æ¯”ä¾‹å€¼è®¡ç®—çš„å‚è€ƒç‚¹
  * å½“ touchmove æ—¶ï¼Œæ ¹æ®èµ·å§‹ç‚¹ å’Œ ä¸´æ—¶çš„ç»ˆæ­¢ç‚¹ è®¡ç®—åœ¨ x/y æ–¹å‘ä¸Šçš„ç§»åŠ¨è·ç¦»ï¼Œè®¡ç®—å‚è€ƒç‚¹åˆ†åˆ« åŠ ä¸Šè¿™ä¸ªè·ç¦»ï¼Œå¾—åˆ°ç§»åŠ¨åçš„ä½ç½®ï¼Œé€šè¿‡ç§»åŠ¨å‰åçš„ä½ç½® è®¡ç®—ç§»åŠ¨å‰åä½ç½®çš„å˜åŠ¨ è®¡ç®—æ—‹è½¬è§’å’Œç¼©æ”¾æ¯”ä¾‹
  * å½“ touchend æ—¶ï¼Œé‡ç½®åº•å›¾å’Œå£ç½©çš„ä½ç½®åŠæ—‹è½¬è§’å’Œç¼©æ”¾æ¯”ä¾‹
* æ ¸å¿ƒç®—æ³•ï¼šæ€ä¹ˆå®ç° åˆæˆå›¾ç‰‡(åˆ©ç”¨ canvas)
  * é¦–å…ˆç»˜åˆ¶åº•å›¾ï¼ˆæ ¹æ®å±å¹•å¤§å°ã€å›¾ç‰‡å¤§å°è®¡ç®—å·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡ï¼‰
  * ç»˜åˆ¶å£ç½©ï¼ˆè®¡ç®—æœ€ç»ˆå£ç½©çš„å¤§å°åŠä¸­å¿ƒä½ç½® æ—‹è½¬è§’åº¦,ç§»åŠ¨ç”»å¸ƒåŸç‚¹åˆ°å£ç½©çš„ä¸­å¿ƒä½ç½®ï¼Œæ—‹è½¬ç”»å¸ƒ å¹¶ç»˜åˆ¶å£ç½©ï¼‰


### å‚è€ƒé¡¹ç›®
* å°ç¨‹åºï¼šæˆ‘è¦æˆ´å£ç½©ï¼Œ[idealclover/Wear-A-Mask](https://github.com/idealclover/Wear-A-Mask)
* è‡ªåŠ¨åœ£è¯å¸½ï¼š[christmas-hat](https://github.com/hk029/christmas-hat)
* è‡ªåŠ¨è¯†åˆ«äººè„¸ç¤ºä¾‹ï¼š[bnk48-face-recognition](http://supachaic.github.io/bnk48-face-recognition)
* å°ç¨‹åºåœ£è¯å¸½ï¼š[jasscia/ChristmasHat](https://github.com/jasscia/ChristmasHat)
* face-api.js [https://github.com/justadudewhohacks/face-api.js](https://github.com/justadudewhohacks/face-api.js)
* è…¾è®¯äº‘äººè„¸è¯†åˆ«ï¼š [https://cloud.tencent.com/product/facerecognition](https://cloud.tencent.com/product/facerecognition)
* Tarojsç‰ˆæœ¬å›¾ç‰‡è£å‰ªï¼š[https://www.npmjs.com/package/taro-cropper](https://www.npmjs.com/package/taro-cropper)
* ç—…æ¯’æ¼”åŒ–æ¨¡æ‹Ÿå™¨ [https://qqqdu.oss-cn-beijing.aliyuncs.com/index.html](https://qqqdu.oss-cn-beijing.aliyuncs.com/index.html)
